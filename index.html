<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶è‡¶ô‡ßç‡¶ó‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶ï‡ßç‡¶∏‡¶ö‡ßá‡¶û‡ßç‡¶ú</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"> </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* ‡¶´‡¶®‡ßç‡¶ü ‡¶ì ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶® */
        body {
    font-family: 'Hind Siliguri', Inter, sans-serif;
    background-color: #f7f9fc;
    min-height: 100vh;
}

        /* ‡¶¨‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ - ‡¶Ü‡¶ß‡ßÅ‡¶®‡¶ø‡¶ï ‡¶®‡ßÄ‡¶≤ */
        .brand-blue {
            background-color: #0d6efd; /* ‡¶¨‡ßÅ‡¶ü‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶™ ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞‡¶ø ‡¶¨‡ßç‡¶≤‡ßÅ ‡¶è‡¶∞ ‡¶ï‡¶æ‡¶õ‡¶æ‡¶ï‡¶æ‡¶õ‡¶ø */
            transition: background-color 0.2s;
        }

        .brand-blue:hover {
            background-color: #0b5ed7;
        }

        .brand-blue-text {
            color: #0d6efd;
        }

        /* ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ - ‡¶è‡¶≤‡¶ø‡¶≠‡ßá‡¶ü‡ßá‡¶° ‡¶≤‡ßÅ‡¶ï */
        .app-card {
            background: white;
            border-radius: 12px; /* ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°‡ßá‡¶° */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); /* ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶Æ‡¶æ‡¶® ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã */
            border: 1px solid #e9ecef;
            transition: box-shadow 0.3s, transform 0.2s;
        }

        .app-card:hover {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            transform: translateY(-1px);
        }

        /* ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡¶π‡ßá‡¶°‡¶æ‡¶∞ */
        .fixed-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 50;
            background: white;
            border-bottom: 1px solid #e9ecef;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        /* ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç */
        .content-margin{
            margin-top: 6rem;
        }

        /* ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤‡¶ø‡¶Ç */
        .app-input {
            border: 1px solid #ced4da;
            border-radius: 8px;
            padding: 12px;
            font-size: 16px;
            background-color: white;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .app-input:focus {
            outline: none;
            border-color: #0d6efd;
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
        }

        /* ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶∏‡ßç‡¶™‡¶ø‡¶®‡¶æ‡¶∞ ‡¶ì ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) */
        #loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            flex-direction: column;
            gap: 1rem;
            color: #333;
            font-size: 1.25rem;
            font-weight: 600;
            opacity: 1; /* ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‡¶∞‡ßÇ‡¶™‡ßá ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶Æ‡¶æ‡¶® */
            pointer-events: all; /* ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡¶∞‡¶æ */
            transition: opacity 0.5s ease-out; /* ‡¶Æ‡¶∏‡ßÉ‡¶£ ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡¶ø‡¶∂‡¶® ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã */
        }
        
        /* ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá ‡¶Ö‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ */
        #loading-overlay.fade-out {
            opacity: 0;
            pointer-events: none; /* ‡¶Ö‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡¶æ */
        }

        .spinner {
            border: 4px solid #e5e7eb;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-top-color: #0d6efd;
            animation: spin 1s ease infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    
    <!-- ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá -->
    <div id="loading-overlay">
        <div class="spinner"></div>
        <p>‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
    </div>

    <!-- ‡¶π‡ßá‡¶°‡¶æ‡¶∞ -->
    <header class="fixed-header">
        <div class="container max-w-6xl mx-auto px-4 py-3 flex justify-between items-center h-16">
            
            <!-- ‡¶≤‡ßã‡¶ó‡ßã ‡¶è‡¶¨‡¶Ç ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ -->
            <div class="text-xl font-extrabold brand-blue-text flex items-center">
                <span class="mr-2 text-3xl">üîó</span> ENGAGEHUB
            </div>
            
            <!-- ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ú ‡¶ì ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® -->
            <div class="flex items-center gap-0">
                <div class="bg-gradient-to-r from-blue-300 to-blue-600 text-white font-bold px-3 py-0.5 rounded-full text-0.1 flex items-center shadow-md">
                    <i class="fas fa-coins mr-2"></i>
                    <span id="user-points">0</span>
                </div>
                
                <!-- ‡¶®‡ßá‡¶≠‡¶ø‡¶ó‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶ü‡¶® -->
                <button class="w-10 h-10 rounded-full hover:bg-gray-100 transition duration-200 text-gray-600" title="‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤" onclick="window.location.href='profile.html'">
                    <i class="fas fa-user text-lg"></i>
                </button>
                <button class="w-10 h-10 rounded-full hover:bg-gray-100 transition duration-200 text-gray-600" title="‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü" onclick="window.logout()">
                    <i class="fas fa-sign-out-alt text-lg"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- ‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü -->
    <div class="container max-w-4xl mx-auto px-4 content-margin hidden" id="main-content-container">
        
        <main>
            <!-- ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶® ‡¶ï‡¶æ‡¶∞‡ßç‡¶° (Quick Actions Card) -->
            <div class="app-card p-6 mb-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center border-b pb-4">
                    ‚öôÔ∏è ‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®
                </h2>
                <!-- ‡¶®‡¶§‡ßÅ‡¶®: ‡¶ó‡ßç‡¶∞‡¶ø‡¶° ‡ß®x‡ß® (‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤) ‡¶è‡¶¨‡¶Ç ‡ß™x‡ßß (‡¶°‡ßá‡¶∏‡ßç‡¶ï‡¶ü‡¶™) -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <a href="order.html" class="block brand-blue text-center py-3 px-2 text-xs md:text-sm font-bold rounded-xl text-white hover:shadow-xl hover:brightness-110 transform transition duration-300 shadow-md">
                        <i class="fas fa-plus-circle block md:hidden mb-1"></i> 
                        <span class="hidden md:inline"><i class="fas fa-plus-circle mr-1"></i></span> ‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞
                    </a>
                    <a href="profile.html" class="block bg-gray-500 text-center py-3 px-2 text-xs md:text-sm font-bold rounded-xl text-white hover:bg-gray-600 hover:shadow-xl transform transition duration-300 shadow-md">
                         <i class="fas fa-user block md:hidden mb-1"></i>
                         <span class="hidden md:inline"><i class="fas fa-user mr-1"></i></span> ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤
                    </a>
                    <a href="leaderboard.html" class="block bg-yellow-500 text-center py-3 px-2 text-xs md:text-sm font-bold rounded-xl text-white hover:bg-yellow-600 hover:shadow-xl transform transition duration-300 shadow-md">
                         <i class="fas fa-crown block md:hidden mb-1"></i>
                         <span class="hidden md:inline"><i class="fas fa-crown mr-1"></i></span> ‡¶≤‡¶ø‡¶°‡¶æ‡¶∞‡¶¨‡ßã‡¶∞‡ßç‡¶°
                    </a>
                    <a href="referral.html" class="block bg-purple-500 text-center py-3 px-2 text-xs md:text-sm font-bold rounded-xl text-white hover:bg-purple-600 hover:shadow-xl transform transition duration-300 shadow-md">
                         <i class="fas fa-handshake block md:hidden mb-1"></i>
                         <span class="hidden md:inline"><i class="fas fa-handshake mr-1"></i></span> ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤
                    </a>
                </div>
            </div>
            
            <!-- ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶ì ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° -->
            <div class="app-card p-6 mb-8" id="dashboard">
                
                <!-- ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡ßá‡¶ï‡¶∂‡¶® -->
                <div class="flex items-center gap-4 mb-6 pb-6 border-b border-gray-100">
                    <div class="w-20 h-11 bg-gray-100 brand-blue-text rounded-full flex items-center justify-center text-3xl font-bold overflow-hidden border-2 border-gray-300" id="profile-avatar">
                        S
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold text-gray-800" id="user-name-display">‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ</h3>
                        <p class="text-gray-500 text-sm mt-1">
                            ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø: <span id="user-id-display" class="font-mono text-xs bg-gray-100 px-2 py-0.5 rounded">user123</span>
                        </p>
                    </div>
                </div>

                <!-- ‡¶™‡¶∞‡¶ø‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ‡¶® -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    
                    <div class="stat-card p-4 text-center bg-yellow-50 rounded-lg shadow-sm">
                        <i class="fas fa-star text-3xl text-yellow-500 mb-2"></i>
                        <div class="text-2xl font-bold text-gray-800" id="total-points">‡ß¶</div>
                        <div class="text-sm text-gray-500">‡¶Æ‡ßã‡¶ü ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü</div>
                    </div>
                    
                    <div class="stat-card p-4 text-center bg-blue-50 rounded-lg shadow-sm">
                        <i class="fas fa-chart-line text-3xl brand-blue-text mb-2"></i>
                        <div class="text-2xl font-bold text-gray-800" id="total-tasks-created">‡ß¶</div>
                        <div class="text-sm text-gray-500">‡¶§‡ßà‡¶∞‡¶ø‡¶ï‡ßÉ‡¶§ ‡¶ï‡¶æ‡¶ú</div>
                    </div>
                    
                    <div class="stat-card p-4 text-center bg-green-50 rounded-lg shadow-sm">
                        <i class="fas fa-check-circle text-3xl text-green-500 mb-2"></i>
                        <div class="text-2xl font-bold text-gray-800" id="total-tasks-completed">‡ß¶</div>
                        <div class="text-sm text-gray-500">‡¶∏‡¶´‡¶≤ ‡¶ï‡¶æ‡¶ú</div>
                    </div>
                    
                    <div class="stat-card p-4 text-center bg-red-50 rounded-lg shadow-sm">
                        <i class="fas fa-times-circle text-3xl text-red-500 mb-2"></i>
                        <div class="text-2xl font-bold text-gray-800" id="total-tasks-rejected">‡ß¶</div>
                        <div class="text-sm text-gray-500">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶æ‡¶ú</div>
                    </div>
                </div>
            </div>

            <!-- ‡¶â‡¶™‡¶≤‡¶¨‡ßç‡¶ß ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï -->
            <div class="app-card p-6 mb-8" id="available-tasks-section">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center border-b pb-4">
                    üéØ ‡¶â‡¶™‡¶≤‡¶¨‡ßç‡¶ß ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶∏‡¶Æ‡ßÇ‡¶π
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="available-tasks-grid">
                    <!-- Tasks will be loaded here -->
                </div>
            </div>

            <!-- ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®‡¶ï‡ßÉ‡¶§ ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï -->
            <div class="app-card p-6 mb-8" id="completed-tasks-section">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center border-b pb-4">
                    ‚úÖ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®‡¶ï‡ßÉ‡¶§ ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="completed-tasks-grid">
                    <!-- Completed tasks will be loaded here -->
                </div>
            </div>
        </main>
    </div>

    <!-- ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶® ‡¶Æ‡¶°‡¶æ‡¶≤ (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶ø‡¶§) -->
    <div id="submit-proof-modal" class="fixed inset-0 z-50 flex justify-center items-center p-4 transition-opacity duration-300 hidden" style="background-color: rgba(0, 0, 0, 0.4);">
        <div class="app-card p-6 w-full max-w-md relative animate-in zoom-in-50 duration-300">
            <button class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 text-3xl transition" onclick="closeModal('submit-proof-modal')">
                &times;
            </button>
            <h2 class="text-xl font-bold text-gray-800 mb-6 border-b pb-3">‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®</h2>
            <form id="submitProofForm">
                
                <!-- ‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø‡¶∞ ‡¶®‡¶æ‡¶Æ -->
                <div class="mb-4">
                    <label for="facebookName" class="block text-sm font-medium text-gray-700 mb-2">
                        ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø‡¶∞ ‡¶®‡¶æ‡¶Æ:
                    </label>
                    <!-- autocomplete="off" ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶Ø‡¶æ‡¶§‡ßá ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶∏‡¶æ‡¶ú‡ßá‡¶∂‡¶® ‡¶®‡¶æ ‡¶Ü‡¶∏‡ßá -->
                    <!-- value ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶æ‡¶≠‡¶æ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶¶‡¶ø‡ßü‡ßá ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá -->
                    <input type="text" id="facebookName" name="facebookName" 
                           class="app-input w-full" 
                           placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: Shuvo Ahamed" required autocomplete="off">
                    <p class="text-xs text-gray-500 mt-1">‡¶è‡¶á ‡¶§‡¶•‡ßç‡¶Ø‡¶ü‡¶ø ‡¶∂‡ßá‡¶∑‡¶¨‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßç‡¶¨‡ßü‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã‡•§</p>
                </div>

                <!-- ‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï -->
                <div class="mb-4">
                    <label for="facebookLink" class="block text-sm font-medium text-gray-700 mb-2">
                        ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï:
                    </label>
                    <input type="url" id="facebookLink" name="facebookLink" 
                           class="app-input w-full" 
                           placeholder="https://facebook.com/your.profile" required autocomplete="off">
                    <p class="text-xs text-gray-500 mt-1">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶≤‡¶ø‡¶Ç‡¶ï‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡ßç‡¶™‡ßá‡¶∏ ‡¶¨‡¶æ ‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶¶‡ßá‡¶¨‡ßá‡¶® ‡¶®‡¶æ‡•§</p>
                </div>
                
                <!-- ‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶á‡¶®‡¶™‡ßÅ‡¶ü‡¶ü‡¶ø ‡¶∏‡¶∞‡¶ø‡¶Ø‡¶º‡ßá ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá -->

                <button type="submit" class="w-full brand-blue text-white py-3 text-center rounded-lg font-bold hover:shadow-lg transition duration-200">
                    <i class="fas fa-upload mr-2"></i> ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®
                </button>
            </form>
        </div>
    </div>
    
    <div id="notification-container" class="fixed bottom-4 right-4 z-50 space-y-2"></div>
    
    <script type="module">
        // Firebase RTDB imports
        // 'update' ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ü‡¶ø ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶∞‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
        import { auth, rtdb, showNotification, logout } from './rtdb-config.js';
        import { onAuthStateChanged, setPersistence, browserSessionPersistence, signInWithCustomToken, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js";
        import { set, ref, onValue, push, update } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-database.js";
        
        const loadingOverlay = document.getElementById('loading-overlay');
        const mainContentContainer = document.getElementById('main-content-container');
        const availableTasksGrid = document.getElementById('available-tasks-grid');
        const completedTasksGrid = document.getElementById('completed-tasks-grid');
        const availableTasksSection = document.getElementById('available-tasks-section');
        
        const submitProofModal = document.getElementById('submit-proof-modal');
        const submitProofForm = document.getElementById('submitProofForm');
        
        let currentTaskId = null;
        let userId = null;
        let currentUserPoints = 0;
        let currentUserName = '';
        let userCompletedTasks = {};
        
        // ‡¶∂‡ßá‡¶∑‡¶¨‡¶æ‡¶∞ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡¶§‡ßÅ‡¶® ‡¶≠‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡ßü‡ßá‡¶¨‡¶≤
        let lastFacebookName = '';
        let lastFacebookLink = '';
        
        let authAndDataLoaded = false;

        const showContentAndHideLoader = () => {
            if (!authAndDataLoaded) {
                authAndDataLoaded = true;
                // 'hidden' ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡ßá 'fade-out' ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
                loadingOverlay.classList.add('fade-out');
                mainContentContainer.classList.remove('hidden');
            }
        };

        setTimeout(() => {
            if (!authAndDataLoaded) {
                console.warn("Loading timeout exceeded. Showing content anyway.");
                showNotification('‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶§‡ßá ‡¶¨‡ßá‡¶∂‡¶ø ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶®‡¶ø‡¶ö‡ßç‡¶õ‡ßá, ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶¨‡¶æ ‡¶™‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', 'warning');
                showContentAndHideLoader();
            }
        }, 5000); 

        window.scrollToTasks = () => {
            if (availableTasksSection) {
                availableTasksSection.scrollIntoView({
                    behavior: 'smooth'
                });
            }
        };

        const getStatusBadge = (status) => {
            switch(status) {
                case 'approved':
                    return '<span class="px-3 py-1 text-sm font-medium rounded-full bg-green-100 text-green-700 flex items-center"><i class="fas fa-check-circle mr-1"></i> ‡¶∏‡¶´‡¶≤</span>';
                case 'rejected':
                    return '<span class="px-3 py-1 text-sm font-medium rounded-full bg-red-100 text-red-700 flex items-center"><i class="fas fa-times-circle mr-1"></i> ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</span>';
                default:
                    return '<span class="px-3 py-1 text-sm font-medium rounded-full bg-yellow-100 text-yellow-700 flex items-center"><i class="fas fa-hourglass-half mr-1"></i> ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶ö‡¶≤‡¶õ‡ßá</span>';
            }
        }
        
        const getTaskTypeBadge = (type) => {
             // ‡¶Ü‡¶ß‡ßÅ‡¶®‡¶ø‡¶ï ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ú ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤
            const baseClasses = "px-3 py-1 text-xs font-medium rounded-full capitalize shadow-sm";
            let colorClasses;
            switch(type.toLowerCase()) {
                case 'like':
                    colorClasses = "bg-blue-500 text-white";
                    break;
                case 'comment':
                    colorClasses = "bg-purple-500 text-white";
                    break;
                case 'share':
                    colorClasses = "bg-pink-500 text-white";
                    break;
                default:
                    colorClasses = "bg-gray-200 text-gray-800";
            }
            return `<span class="${baseClasses} ${colorClasses}">${type}</span>`;
        }

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
                
                const userRef = ref(rtdb, `users/${userId}`);
                onValue(userRef, async (snapshot) => {
                    const userData = snapshot.val() || {};

                    if (snapshot.val() === null) {
                        const initialUserData = {
                            points: 0,
                            facebookName: '‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ',
                            tasksCreated: 0,
                            tasksCompleted: 0,
                            tasksRejected: 0,
                            createdAt: Date.now(),
                            // ‡¶á‡¶®‡¶ø‡¶∂‡¶ø‡ßü‡¶æ‡¶≤‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶®‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶¶‡ßÅ‡¶ü‡¶ø ‡¶®‡¶§‡ßÅ‡¶® ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßã
                            lastFacebookName: '',
                            lastFacebookLink: ''
                        };
                        try {
                            await set(userRef, initialUserData);
                            return; 
                        } catch (e) {
                            console.error("User initialization failed:", e);
                            showNotification('‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶°‡ßá‡¶ü‡¶æ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§', 'error');
                        }
                    }

                    currentUserPoints = userData.points || 0; 
                    currentUserName = userData.facebookName || '‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ';
                    userCompletedTasks = userData.completedTasks || {};
                    
                    // ‡¶∂‡ßá‡¶∑‡¶¨‡¶æ‡¶∞ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
                    lastFacebookName = userData.lastFacebookName || '';
                    lastFacebookLink = userData.lastFacebookLink || '';
                    
                    document.getElementById('user-points').textContent = ` ${currentUserPoints.toLocaleString('bn-BD')}`;
                    document.getElementById('total-points').textContent = currentUserPoints.toLocaleString('bn-BD');
                    document.getElementById('total-tasks-created').textContent = (userData.tasksCreated || 0).toLocaleString('bn-BD');
                    document.getElementById('total-tasks-completed').textContent = (userData.tasksCompleted || 0).toLocaleString('bn-BD');
                    document.getElementById('total-tasks-rejected').textContent = (userData.tasksRejected || 0).toLocaleString('bn-BD');
                    document.getElementById('user-name-display').textContent = currentUserName;
                    document.getElementById('user-id-display').textContent = user.uid;
                    
                    const profileAvatar = document.getElementById('profile-avatar');
                    profileAvatar.innerHTML = '';
                    if (userData.profilePhotoUrl) {
                        const img = document.createElement('img');
                        img.src = userData.profilePhotoUrl;
                        img.alt = userData.facebookName || '‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ';
                        img.className = 'w-full h-full object-cover rounded-full';
                        profileAvatar.appendChild(img);
                    } else if (userData.facebookName) {
                        profileAvatar.textContent = userData.facebookName.charAt(0).toUpperCase();
                    }
                    
                    listenForTasks(); 
                    showContentAndHideLoader();
                });
                
            } else {
                try {
                    await setPersistence(auth, browserSessionPersistence);
                    const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                    } else {
                        await signInAnonymously(auth);
                    }
                } catch (error) {
                    console.error("Authentication failed:", error);
                    showNotification('‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§ ‡¶™‡ßá‡¶ú‡¶ü‡¶ø ‡¶∞‡¶ø‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', 'error');
                    showContentAndHideLoader();
                }
            }
        });

        const listenForTasks = () => {
            if (!userId) return;

            const tasksRef = ref(rtdb, `tasks`);
            
            onValue(tasksRef, (snapshot) => {
                const allTasks = snapshot.val() || {};
                const availableTasks = [];
                const completedTasks = [];
                
                for (const id in allTasks) {
                    const task = allTasks[id];
                    if (task && task.ownerId) { 
                        const userStatus = userCompletedTasks[id];
                        
                        if (task.ownerId !== userId) {
                            if (userStatus) {
                                // Find the specific status from proofs if available, otherwise use the stored user status
                                let statusToDisplay = userStatus;
                                if(task.proofs) {
                                    const latestProof = Object.values(task.proofs).find(p => p.userId === userId);
                                    if(latestProof) {
                                        statusToDisplay = latestProof.status;
                                    }
                                }

                                const completedTaskData = { 
                                    id: id, 
                                    status: statusToDisplay, 
                                    ...task 
                                };
                                completedTasks.push(completedTaskData);

                            } else if (task.status === 'active' && (task.completedCount || 0) < task.quantity) {
                                availableTasks.push({ id: id, ...task });
                            }
                        }
                    }
                }

                availableTasks.sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0)); 
                completedTasks.sort((a, b) => (b.createdAt || 0) - (a.createdAt || 0)); 
                
                displayAvailableTasks(availableTasks);
                displayCompletedTasks(completedTasks);
            });
        };

        const displayAvailableTasks = (tasks) => {
            availableTasksGrid.innerHTML = '';
            if (tasks.length === 0) {
                availableTasksGrid.innerHTML = '<div class="col-span-full text-center py-12 text-gray-500 text-lg">‚ú® ‡¶è‡¶ñ‡¶® ‡¶ï‡ßã‡¶®‡ßã ‡¶â‡¶™‡¶≤‡¶¨‡ßç‡¶ß ‡¶ï‡¶æ‡¶ú ‡¶®‡ßá‡¶á‡•§ ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</div>';
                return;
            }

            tasks.forEach(task => {
                const completedCount = task.completedCount || 0; 
                
                const taskCard = `
                    <div class="app-card p-5">
                        <div class="flex justify-between items-start mb-4">
                            ${getTaskTypeBadge(task.taskType)}
                            <div class="bg-gradient-to-r from-green-400 to-green-600 text-white font-bold px-3 py-1 rounded-full text-sm shadow-md">
                                + ${(task.pointsPerTask).toLocaleString('bn-BD')} ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü
                            </div>
                        </div>
                        <h4 class="text-xl font-semibold text-gray-800 mb-4">${task.taskType} ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®</h4>
                        <div class="space-y-2 text-sm text-gray-600 mb-6">
                            <p class="flex justify-between items-center">
                                <span><i class="fas fa-bullseye text-blue-500 mr-2"></i> ‡¶Æ‡ßã‡¶ü ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø:</span> 
                                <span class="font-bold text-base">${task.quantity.toLocaleString('bn-BD')} ‡¶ü‡¶ø</span>
                            </p>
                            <p class="flex justify-between items-center">
                                <span><i class="fas fa-check-double text-green-500 mr-2"></i> ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá:</span> 
                                <span class="font-bold text-base text-green-600">${completedCount.toLocaleString('bn-BD')} ‡¶ü‡¶ø</span>
                            </p>
                            <div class="pt-3 border-t border-gray-100">
                                <span class="block mb-1 text-gray-500 font-medium text-xs">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶≤‡¶ø‡¶Ç‡¶ï:</span> 
                                <a href="${task.taskLink}" target="_blank" class="brand-blue-text hover:underline text-sm break-all font-mono">${task.taskLink}</a>
                            </div>
                        </div>
                        <button class="w-full brand-blue text-white py-2.5 px-4 text-base font-bold rounded-lg hover:brightness-110 shadow-md" onclick="openSubmitProofModal('${task.id}')">
                            <i class="fas fa-hand-pointer mr-2"></i> ‡¶ï‡¶æ‡¶ú‡¶ü‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>
                    </div>
                `;
                availableTasksGrid.insertAdjacentHTML('beforeend', taskCard);
            });
        };

        const displayCompletedTasks = (tasks) => {
            completedTasksGrid.innerHTML = '';
            if (tasks.length === 0) {
                completedTasksGrid.innerHTML = '<div class="col-span-full text-center py-12 text-gray-500 text-lg">‡¶Ü‡¶™‡¶®‡¶ø ‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶æ‡¶ú ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶®‡¶®‡¶ø‡•§</div>';
                return;
            }

            tasks.forEach(task => {
                const statusBadge = getStatusBadge(task.status);
                const canRetry = task.status === 'rejected';
                
                const taskCard = `
                    <div class="app-card p-5">
                        <div class="flex justify-between items-center mb-4">
                            ${getTaskTypeBadge(task.taskType)}
                            ${statusBadge}
                        </div>
                        <h4 class="text-xl font-semibold text-gray-800 mb-4">${task.taskType} ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï</h4>
                        <div class="space-y-2 text-sm text-gray-600 mb-6">
                            <p class="flex justify-between items-center">
                                <span><i class="fas fa-award text-yellow-500 mr-2"></i> ${task.status === 'approved' ? '‡¶Ö‡¶∞‡ßç‡¶ú‡¶ø‡¶§' : '‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶∂‡¶ø‡¶§'} ‡¶™‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶ü:</span> 
                                <span class="font-bold text-base text-green-600">${(task.pointsPerTask).toLocaleString('bn-BD')}</span>
                            </p>
                            <div class="pt-3 border-t border-gray-100">
                                <span class="block mb-1 text-gray-500 font-medium text-xs">‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶≤‡¶ø‡¶Ç‡¶ï:</span> 
                                <a href="${task.taskLink}" target="_blank" class="brand-blue-text hover:underline text-sm break-all font-mono">${task.taskLink}</a>
                            </div>
                        </div>
                        ${canRetry ? `
                            <button class="w-full bg-red-500 hover:bg-red-600 text-white py-2.5 px-4 text-base font-bold rounded-lg shadow-md" onclick="openSubmitProofModal('${task.id}')">
                                <i class="fas fa-redo-alt mr-2"></i> ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®
                            </button>
                        ` : `<div class="text-sm text-gray-500 text-center py-2">${task.status === 'approved' ? '‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶® ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§' : '‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶∂‡¶® ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...'}</div>`}
                    </div>
                `;
                completedTasksGrid.insertAdjacentHTML('beforeend', taskCard);
            });
        };

        window.openSubmitProofModal = (taskId) => {
            currentTaskId = taskId;
            
            // ‡¶∂‡ßá‡¶∑‡¶¨‡¶æ‡¶∞ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶°‡ßá‡¶ü‡¶æ ‡¶¶‡¶ø‡ßü‡ßá ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶´‡¶ø‡¶≤‡ßç‡¶°‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∏‡ßç‡¶¨‡ßü‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶≠‡¶æ‡¶¨‡ßá ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
            document.getElementById('facebookName').value = lastFacebookName;
            document.getElementById('facebookLink').value = lastFacebookLink;
            
            submitProofModal.classList.remove('hidden');
        };

        submitProofForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            // ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï‡ßá‡¶∞ ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ ‡¶®‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
            const facebookName = document.getElementById('facebookName').value.trim();
            const facebookLink = document.getElementById('facebookLink').value.trim();
            
            // ‡¶∏‡¶¨ ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ ‡¶§‡¶æ ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡¶æ
            if (!facebookName || !facebookLink) {
                showNotification('‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶è‡¶¨‡¶Ç ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§', 'error');
                return;
            }

            if (!currentTaskId || !userId) {
                showNotification('‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ‡¶ï‡¶æ‡¶ú ‡¶¨‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§', 'error');
                return;
            }
            
            const proofRef = ref(rtdb, `tasks/${currentTaskId}/proofs`);
            
            // proofData ‡¶§‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶´‡ßá‡¶∏‡¶¨‡ßÅ‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶π‡¶≤‡ßã
            const proofData = {
                userId: userId,
                userName: currentUserName,
                facebookName: facebookName, 
                facebookLink: facebookLink,
                submittedAt: Date.now(), 
                status: 'pending' 
            };

            try {
                // Remove existing 'rejected' or 'pending' status from user's completed tasks before submitting a new proof
                const userCompletedTaskRef = ref(rtdb, `users/${userId}/completedTasks/${currentTaskId}`);
                await set(userCompletedTaskRef, 'pending');
                
                await push(proofRef, proofData);

                // *** ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ú‡¶®: ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤‡ßá ‡¶∂‡ßá‡¶∑ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ***
                const userUpdateRef = ref(rtdb, `users/${userId}`);
                await update(userUpdateRef, {
                    lastFacebookName: facebookName,
                    lastFacebookLink: facebookLink,
                });
                // *******************************************************************

                showNotification('‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ú‡¶Æ‡¶æ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶ï‡¶∞‡¶¨‡ßá‡•§', 'success');
                submitProofForm.reset();
                closeModal('submit-proof-modal');

            } catch (error) {
                console.error("Proof submission failed:", error);
                showNotification(`‡¶™‡ßç‡¶∞‡ßÅ‡¶´ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ${error.message}`, 'error');
            }
        });

        window.logout = logout;
        window.closeModal = (modalId) => {
            document.getElementById(modalId).classList.add('hidden');
        };

        window.onclick = function(event) {
            if (event.target === submitProofModal) {
                submitProofModal.classList.add('hidden');
            }
        };
    </script>
</body>
</html>

