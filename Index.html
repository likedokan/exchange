<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <script>
        window.onerror = function(message, source, lineno, colno, error) {
            // ржПрж░рж░ ржорзЗрж╕рзЗржЬ ржмржХрзНрж╕ржЯрж┐ ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░рж╛
            var errorBox = document.getElementById('errorDisplay');
            
            // ржпржжрж┐ ржмржХрзНрж╕ржЯрж┐ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ (DOM рж▓рзЛржб рж╣ржУржпрж╝рж╛рж░ ржкрж░)
            if (errorBox) {
                errorBox.style.display = 'block'; // ржмржХрзНрж╕ржЯрж┐ ржжрзГрж╢рзНржпржорж╛ржи ржХрж░рж╛
                errorBox.innerHTML = "тЪая╕П Error: " + message + "<br>Line: " + lineno;
            } else {
                // ржпржжрж┐ ржмржХрзНрж╕ ржирж╛ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ (ржЦрзБржм ржЖрж░рзНрж▓рж┐ ржПрж░рж░), рждржмрзЗ ржбржХрзБржорзЗржирзНржЯ рж▓рзЛржб рж╣рж▓рзЗ ржжрзЗржЦрж╛ржмрзЗ
                window.addEventListener('DOMContentLoaded', function() {
                    var box = document.getElementById('errorDisplay');
                    if(box) {
                        box.style.display = 'block';
                        box.innerHTML = "тЪая╕П Error: " + message + "<br>Line: " + lineno;
                    }
                });
            }
        };
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>рж╕рж╛ржкрзЗрж░ ржЧрзЗржо - ржЖрж▓ржЯрж┐ржорзЗржЯ ржПржбрж┐рж╢ржи</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <canvas id="gameCanvas"></canvas>

    <div id="joystick-base"><div id="joystick-stick"></div></div>

    <div id="uiLayer">
        <div class="hud-top-left" id="scoreArea">
            <div class="score-box">
                <span class="score-label">рж╕рзНржХрзЛрж░</span>
                <span id="scoreDisplay">0</span>
            </div>
            <div class="highscore-box">
                ржорзБржХрзБржЯ: <span id="highScoreDisplay">0</span>
            </div>
            <div id="activePowerUps"></div>
        </div>
        <div id="teamScoreBoard" style="position: absolute; top: 10px; left: 50%; transform: translateX(-50%); width: 300px; height: 30px; background: rgba(0,0,0,0.5); border-radius: 15px; overflow: hidden; display: none;">
            <div id="redScoreBar" style="width: 50%; height: 100%; background: #ff1744; float: left; transition: width 0.5s;"></div>
            <div id="greenScoreBar" style="width: 50%; height: 100%; background: #00e676; float: right; transition: width 0.5s;"></div>
            <span style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-weight: bold; font-size: 14px; text-shadow: 0 0 3px black;">TEAM BATTLE</span>
        </div>

        <div id="zoneStatus" style="position: absolute; top: 100px; left: 50%; transform: translateX(-50%); color: #ff1744; font-weight: bold; font-size: 18px; text-shadow: 0 0 10px red; display: none;">
            ЁЯФе ZONE SHRINKING ЁЯФе
        </div>
        
        <div id="killFeed"></div>

        <div id="leaderboard">
            <h3>ЁЯПЖ рж╕рзЗрж░рж╛ ржпрзЛржжрзНржзрж╛ ЁЯПЖ</h3>
            <div id="lb-content"></div>
        </div>

        <canvas id="miniMap" width="150" height="150"></canvas>
        <div id="healthContainer">
            <div style="display: flex; justify-content: space-between; color: #fff; font-size: 10px; font-weight: bold; margin-bottom: 2px;">
                <span>тЭдя╕П HP</span>
                <span id="healthText">100%</span>
            </div>
            <div id="healthBarWrapper">
                <div id="healthBar"></div>
            </div>
        </div>

        <div id="staminaContainer">
            <div style="display: flex; justify-content: space-between; color: #fff; font-size: 10px; font-weight: bold; margin-bottom: 2px;">
                <span>тЪб ENERGY</span>
                <span id="staminaText">100%</span>
            </div>
            <div id="staminaBarWrapper">
                <div id="staminaBar"></div>
            </div>
        </div>

        <div id="protectionText">рж╕рзБрж░ржХрзНрж╖рж╛ ржмрж▓ржпрж╝ рж╕ржХрзНрж░рж┐ржпрж╝!</div>
        
        <div id="controls"><div id="boostBtn">тЪб</div></div>

        <div id="layoutEditorControls" class="hidden">
            <div class="resize-controls">
                <button class="resize-btn" id="visibilityBtn" onclick="toggleHideSelected()">ЁЯСБя╕П</button>
                <div style="width: 2px; height: 30px; background: rgba(255,255,255,0.2); margin: 0 10px;"></div>
                <button class="resize-btn" onclick="resizeSelectedElement(-0.1)">-</button>
                <span style="color:white; line-height: 40px; font-weight:bold;">рж╕рж╛ржЗржЬ</span>
                <button class="resize-btn" onclick="resizeSelectedElement(0.1)">+</button>
            </div>
            <button class="editor-btn" onclick="saveCustomLayout()">рж▓рзЗржЖржЙржЯ рж╕рзЗржн ржХрж░рзБржи тЬЕ</button>
        </div>
    </div>

    <div id="inGameSettingsBtn" onclick="togglePause()">тЪЩя╕П</div>

    <div id="startScreen">
        <div class="menu-card">
            
            <div id="mainSettingsBtn" onclick="openSettingsPage()">тЪЩя╕П рж╕рзЗржЯрж┐ржВрж╕</div>
            
            <div id="shopBtn" onclick="openShopPage()">ЁЯЫТ</div>
            
            <div class="game-logo">ЁЯРН</div>
            <h1 class="title-text">SNAKE <span>WAR</span></h1>
            <div class="subtitle">Ultimate Survival Area</div>
            
            <div class="input-group">
                <input type="text" id="playerNameInput" placeholder="ENTER NAME" maxlength="12">
                <div id="errorDisplay" class="error-msg"></div> 
            </div>

            <div class="level-container" style="margin-bottom: 20px; width: 100%;">
                <div style="display: flex; justify-content: space-between; color: #bbb; font-size: 12px; margin-bottom: 5px;">
                    <span id="playerLevelDisplay">LEVEL 1</span>
                    <span id="playerXPDisplay">0 / 500 XP</span>
                </div>
                <div style="width: 100%; height: 8px; background: #333; border-radius: 10px; overflow: hidden; border: 1px solid #555;">
                    <div id="xpProgressBar" style="width: 0%; height: 100%; background: linear-gradient(90deg, #00e676, #00c853); transition: width 0.5s;"></div>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <div class="skin-label">Current Skin</div>
                <div id="homeSkinPreview" style="width: 50px; height: 50px; border-radius: 50%; margin: 10px auto; border: 3px solid white; box-shadow: 0 0 15px white;"></div>
            </div>

            <div class="skin-label" style="margin-top: 15px;">SELECT MAP</div>
            <div style="display: flex; justify-content: center; gap: 15px; margin-bottom: 25px;">
                <div id="btnClassic" onclick="selectMap('classic')" style="padding: 10px 20px; background: rgba(0, 230, 118, 0.2); border: 1px solid #00e676; border-radius: 8px; color: white; cursor: pointer; font-weight: bold;">
                    ЁЯМН Classic
                </div>
                <div id="btnCyber" onclick="selectMap('cyber')" style="padding: 10px 20px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; color: white; cursor: pointer; font-weight: bold;">
                    ЁЯФе Cyber
                </div>
            </div>

            <div id="btnTeam" onclick="selectMap('team')" style="padding: 10px 20px; background: linear-gradient(90deg, #ff1744 50%, #00e676 50%); border: 1px solid #fff; border-radius: 8px; color: white; cursor: pointer; font-weight: bold; margin-bottom: 25px;">
                ЁЯФ┤ VS ЁЯЯв
            </div>

            <button class="menu-btn play-btn" onclick="startGame()">
                <span>ржпрзБржжрзНржз рж╢рзБрж░рзБ ржХрж░рзБржи тЦ╢</span>
            </button>
            
            <p class="footer-text">PRO EDITION v3.5</p>
        </div>
    </div>

    <div id="settingsScreen" class="hidden">
        <h1 class="neon-text" style="font-size: 2.5em; margin-bottom: 30px;">SETTINGS</h1>
    
        <div class="settings-content">
            
            <div class="setting-group">
                <span class="setting-label">GRAPHICS QUALITY</span>
                <div class="toggle-container">
                    <div id="gfxLow" class="toggle-option" onclick="setGraphics('low')">LOW</div>
                    <div id="gfxHigh" class="toggle-option selected" onclick="setGraphics('high')">HIGH</div>
                </div>
                <p class="setting-desc">рж▓рзЛ ржорзЛржбрзЗ рж╢рзНржпрж╛ржбрзЛ ржПржмржВ ржЧрзНрж▓рзЛ ржПржлрзЗржХрзНржЯ ржмржирзНржз ржерж╛ржХржмрзЗ (рж╕рзНржорзБрже ржЧрзЗржоржкрзНрж▓рзЗ)ред</p>
            </div>
    
            <hr style="border-color: rgba(255,255,255,0.1); width: 100%; margin: 15px 0;">
    
            <div class="setting-group">
                <div class="switch-row">
                    <span class="setting-label">MUSIC ЁЯО╡</span>
                    <label class="switch">
                        <input type="checkbox" id="musicCheck" checked onchange="toggleMusic(this.checked)">
                        <span class="slider round"></span>
                    </label>
                </div>
                
                <div class="switch-row">
                    <span class="setting-label">SOUND FX ЁЯФК</span>
                    <label class="switch">
                        <input type="checkbox" id="sfxCheck" checked onchange="toggleSFX(this.checked)">
                        <span class="slider round"></span>
                    </label>
                </div>
            </div>
    
            <hr style="border-color: rgba(255,255,255,0.1); width: 100%; margin: 15px 0;">
    
            <div class="setting-group">
                <button class="menu-btn" style="background: #2979ff; color: white; font-size: 16px;" onclick="startCustomLayoutFromSettings()">
                    ржкржЬрж┐рж╢ржи ржарж┐ржХ ржХрж░рзБржи (Custom UI) ЁЯЫая╕П
                </button>
            </div>
    
        </div>
    
        <button class="menu-btn" style="background: #ff1744; margin-top: 20px; max-width: 200px;" onclick="closeSettingsPage()">
            ЁЯФЩ ржлрж┐рж░рзЗ ржпрж╛ржи
        </button>
    </div>

    <div id="shopScreen" class="hidden">
        <h1 class="neon-text" style="font-size: 3em; margin-top: 30px;">SKIN STORE</h1>
        
        <div class="coin-display-large">
            <span>ЁЯТ░</span> <span id="shopCoinsDisplay">0</span>
        </div>

        <div id="dailyRewardContainer" class="daily-reward-box">
            <div class="reward-info">
                <span class="reward-title">ЁЯОБ ржжрзИржирж┐ржХ ржЙржкрж╣рж╛рж░</span>
                <span id="rewardTimer" class="reward-timer">ржЪрзЗржХ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...</span>
            </div>
            <button id="claimRewardBtn" class="reward-btn disabled" onclick="claimDailyReward()">
                рззрзжрзж ЁЯТ░ рж╕ржВржЧрзНрж░рж╣ ржХрж░рзБржи
            </button>
        </div>

        <div class="shop-content">
            <div id="skinContainer" class="shop-grid"></div>
        </div>

        <div class="shop-footer">
             <button id="buyBtn" class="menu-btn hidden" style="background: #FFD700; color: black; max-width: 300px;" onclick="buySelectedSkin()">
                ржЖржирж▓ржХ ржХрж░рзБржи (500 ЁЯТ░)
            </button>

            <button class="menu-btn" onclick="returnToMenu()" style="background: #ff1744; margin-top: 10px; max-width: 200px;">
                ЁЯФЩ ржлрж┐рж░рзЗ ржпрж╛ржи
            </button>
        </div>
    </div> 

    <div id="reviveScreen" class="hidden" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.95); padding: 40px; border-radius: 20px; text-align: center; z-index: 100; border: 2px solid #ff1744;">
        <h1 style="color: white; margin-bottom: 10px; font-size: 28px;">YOU DIED!</h1>
        <p style="color: #bbb; margin-bottom: 20px;">ржЖржкржирж╛рж░ рж╕рзНржХрзЛрж░ ржПржмржВ рж╕рж╛ржЗржЬ ржзрж░рзЗ рж░рж╛ржЦрждрзЗ ржЪрж╛ржи?</p>
        
        <div style="font-size: 40px; margin-bottom: 20px;">тП│ <span id="reviveTimer" style="color: #ff1744; font-weight: bold;">5</span></div>

        <button onclick="useRevive()" style="background: linear-gradient(90deg, #ffea00, #ffd600); border: none; padding: 15px 30px; border-radius: 50px; font-weight: bold; font-size: 18px; cursor: pointer; width: 100%; margin-bottom: 10px;">
            рж░рж┐ржнрж╛ржЗржн ржХрж░рзБржи (рзирзжрзж ЁЯТ░)
        </button>
        
        <button onclick="cancelRevive()" style="background: transparent; border: 2px solid #555; color: #aaa; padding: 10px 20px; border-radius: 50px; cursor: pointer; width: 100%;">
            ржирж╛, ржЧрзЗржо рж╢рзЗрж╖ ржХрж░рзБржи
        </button>
    </div>

    <div id="gameOverScreen" class="hidden">
        <h1 style="color: #ff1744; font-size: 3em; text-shadow: 0 0 20px #ff0000;">ржЧрзЗржо ржУржнрж╛рж░!</h1>
        <div style="font-size: 1.5em; margin: 20px 0;">
            ржЖржкржирж╛рж░ рж╕рзНржХрзЛрж░: <span id="finalScore" style="color: #ffea00;">0</span>
        </div>
        <div id="spectatingMsg" style="display: none; color: #00e676; font-size: 18px; font-weight: bold; margin-top: 5px;"></div>
        <button class="menu-btn" onclick="showStartScreen()">ржорзЗржирзБрждрзЗ ржпрж╛ржи</button>
    </div>

    <div id="pauseScreen" class="hidden">
        <h1 class="neon-text" style="font-size: 2em;">PAUSED</h1>
        
        <div style="margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 15px;">
            <p style="color: #bbb; font-size: 14px; margin-bottom: 10px;">SCREEN ORIENTATION</p>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button class="orientation-btn" onclick="changeOrientation('landscape')">
                    тЖФ Landscape
                </button>
                <button class="orientation-btn" onclick="changeOrientation('portrait')">
                    тЖХ Portrait
                </button>
            </div>
        </div>

        <button class="menu-btn" onclick="togglePause()">
            тЦ╢ ржЪрж╛рж▓рж┐ржпрж╝рзЗ ржпрж╛ржи (Resume)
        </button>
        
        <button class="menu-btn" style="background: linear-gradient(90deg, #FFD700, #FFca28); color: black;" onclick="restartGame()">
            ЁЯФД ржирждрзБржи ржЧрзЗржо (Restart)
        </button>
        
        <button class="menu-btn" style="background: linear-gradient(90deg, #ff1744, #d50000); color: white;" onclick="quitToMenu()">
            ЁЯПа ржорзЗржЗржи ржорзЗржирзБ (Exit)
        </button>
    </div>

    <script src="settings.js"></script>
    <script src="script.js"></script>
</body>
</html>
